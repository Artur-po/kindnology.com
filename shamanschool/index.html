<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∫–æ–ª–∞ —à–∞–º–∞–Ω–æ–≤ ‚Äî Kindnology Universe</title>
    <link rel="stylesheet" href="../css/style.css">
    <!-- Ethers.js for wallet -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —à–∞–º–∞–Ω—Å–∫–æ–π —à–∫–æ–ª—ã */
        .shaman-header {
            background: linear-gradient(145deg, var(--color-dark) 0%, #1a2815 100%);
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            padding: 4rem 0;
            text-align: center;
        }

        .shaman-header h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .shaman-header .subtitle {
            font-size: 1.3rem;
            color: var(--color-accent);
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        .wallet-status-bar {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 1rem;
            background: rgba(0, 30, 0, 0.5);
            padding: 0.8rem 2rem;
            border-radius: 60px;
            margin-bottom: 2rem;
            border: 1px solid #ffd966;
        }

        #walletAddressDisplay {
            font-family: monospace;
            color: #ffd966;
        }

        #connectWalletBtn {
            background: #6ec3a0;
            color: #0a1519;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 40px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        #connectWalletBtn:hover {
            background: #8ed8b8;
        }

        .user-greeting {
            background: rgba(255, 215, 0, 0.1);
            border-left: 4px solid #ffd966;
            padding: 1.5rem;
            border-radius: 20px;
            margin: 2rem 0;
        }

        .doctrine-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin: 4rem 0;
        }

        .doctrine-card {
            background: rgba(0, 30, 0, 0.7);
            backdrop-filter: blur(5px);
            border: 1px solid var(--color-gold);
            border-radius: 24px;
            padding: 2rem 1.5rem;
            transition: all 0.3s ease;
        }

        .doctrine-card:hover {
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.2);
            transform: translateY(-5px);
        }

        .doctrine-card h3 {
            color: var(--color-gold);
            font-size: 1.8rem;
            margin-bottom: 1rem;
            font-family: 'Times New Roman', serif;
        }

        .doctrine-card p {
            color: var(--color-text);
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }

        .philosophy-block {
            background: rgba(0, 0, 0, 0.5);
            border-left: 4px solid var(--color-gold);
            padding: 2.5rem;
            border-radius: 30px;
            margin: 4rem 0;
        }

        .philosophy-block p {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        .philosophy-block .quote {
            font-style: italic;
            color: #ffd966;
            font-size: 1.4rem;
        }

        .initiation-form {
            max-width: 600px;
            margin: 4rem auto;
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid var(--color-gold);
            border-radius: 32px;
            padding: 3rem 2rem;
            text-align: center;
        }

        .initiation-form h2 {
            font-size: 2.2rem;
            color: var(--color-gold);
            margin-bottom: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--color-gold);
            font-weight: 600;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 18px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #3a5a3a;
            border-radius: 40px;
            color: white;
            font-size: 1rem;
            transition: border 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--color-gold);
            outline: none;
        }

        .btn-gold {
            background: transparent;
            border: 2px solid var(--color-gold);
            color: var(--color-gold);
            padding: 14px 40px;
            border-radius: 40px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .btn-gold:hover {
            background: var(--color-gold);
            color: black;
        }

        .wisdom-path {
            margin-top: 5rem;
            padding: 2rem;
            border-top: 1px dashed #3a5a3a;
            text-align: center;
        }

        .wisdom-path p {
            font-style: italic;
            font-size: 1.2rem;
            color: #b8d9b0;
        }

        .module-tag {
            display: inline-block;
            background: rgba(255, 215, 0, 0.15);
            border: 1px solid var(--color-gold);
            padding: 0.3rem 1rem;
            border-radius: 40px;
            font-size: 0.8rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è (–∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π) -->
        <nav>
            <ul>
                <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="/archaeology/">–ê—Ä—Ö–µ–æ–ª–æ–≥–∏—è</a></li>
                <li><a href="/garden/">–°–∞–¥ –°–∞—Ç–æ—à–∏</a></li>
                <li><a href="/shamanschool/" class="active">–®–∫–æ–ª–∞ —à–∞–º–∞–Ω–æ–≤</a></li>
            </ul>
        </nav>

        <!-- –ë–ª–æ–∫ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ—à–µ–ª—å–∫–∞ -->
        <div class="wallet-status-bar">
            <span id="walletAddressDisplay">üë§ –ù–µ –ø–æ–¥–∫–ª—é—á—ë–Ω</span>
            <button id="connectWalletBtn">üîå Connect Wallet</button>
        </div>

        <!-- –•–µ–¥–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        <header class="shaman-header">
            <h1>‚ö° –®–∫–æ–ª–∞ —à–∞–º–∞–Ω–æ–≤ ‚ö°</h1>
            <div class="subtitle">
                –ú—ã –Ω–µ —É—á–∏–º –∫–æ–¥–∏—Ç—å ‚Äî –º—ã —É—á–∏–º —Å–æ–±–∏—Ä–∞—Ç—å —Å–≤–µ—Ç –∏–∑ —Ç—å–º—ã.<br>
                –ü—Ä–µ–≤—Ä–∞—Ç–∏ MEV-–∏–Ω—Å—Ç–∏–Ω–∫—Ç –≤ —Å–∞–¥–æ–≤–æ–¥—á–µ—Å–∫—É—é –º—É–¥—Ä–æ—Å—Ç—å.
            </div>
        </header>

        <!-- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ (–±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º) -->
        <div id="userGreeting" class="user-greeting" style="display: none;"></div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main>
            <!-- –ö—Ä–∞—Ç–∫–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ -->
            <section style="text-align: center; max-width: 800px; margin: 2rem auto;">
                <p style="font-size: 1.2rem;">ShamanSchool ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —à–∫–æ–ª–∞. –≠—Ç–æ ‚Äî initiation.</p>
                <p>–¢—ã –ª–æ–º–∞–µ—à—å –ø–∞—Ä–∞–¥–∏–≥–º—É: –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å–ª–µ–ø–æ –∫–æ–¥–∏—Ç—å, —Ç—ã —É—á–∏—à—å—Å—è <strong>—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É</strong>, –≤–∏–¥–µ—Ç—å —Å–∏—Å—Ç–µ–º—ã –∏–∑–Ω—É—Ç—Ä–∏, —Å–æ–±–∏—Ä–∞—Ç—å –∏ —Ä–∞–∑–±–∏—Ä–∞—Ç—å –º–æ–¥—É–ª–∏ ‚Äî –∫–∞–∫ —à–∞–º–∞–Ω, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç –¥—É—à—É —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.</p>
            </section>

            <!-- –ö—É—Ä—Å "–ê–Ω–∞—Ç–æ–º–∏—è —Ç—å–º—ã" -->
            <section>
                <h2 style="color: #ffd966; text-align: center;">üì¶ –ö—É—Ä—Å: ¬´–ê–Ω–∞—Ç–æ–º–∏—è —Ç—å–º—ã: —Ä–∞–∑–±–∏—Ä–∞–µ–º MEV-–±–æ—Ç–∞ –Ω–∞ –∑–∞–ø—á–∞—Å—Ç–∏¬ª</h2>
                <p style="text-align: center; margin-bottom: 2rem;">–ú—ã –ø–æ–∫–∞–∂–µ–º, –∏–∑ –∫–∞–∫–∏—Ö –∫—Ä–æ–≤–∞–≤—ã—Ö —à–µ—Å—Ç–µ—Ä—ë–Ω–æ–∫ —Å–æ—Å—Ç–æ–∏—Ç ¬´–º–∞–≥–∏—è¬ª —Ö–∏—â–Ω–∏–∫–æ–≤, –∏ –Ω–∞—É—á–∏–º —Å–æ–±–∏—Ä–∞—Ç—å –∏–∑ –Ω–∏—Ö –∑–∞—â–∏—Ç—É.</p>

                <div class="doctrine-grid">
                    <div class="doctrine-card">
                        <span class="module-tag">–ú–æ–¥—É–ª—å 1</span>
                        <h3>üîç –ö–∞–∫ –±–æ—Ç –≤–∏–¥–∏—Ç mempool</h3>
                        <p>–†–∞–∑–±–æ—Ä —Å–µ–Ω—Å–æ—Ä–æ–≤: –æ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ –¥–æ –≤—ã–±–æ—Ä–∞ –∂–µ—Ä—Ç–≤—ã. –¢—ã —É–≤–∏–¥–∏—à—å, –∫–∞–∫ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Å–ª–µ–¥—è—Ç –∑–∞ –∫–∞–∂–¥—ã–º —Ç–≤–æ–∏–º –¥–≤–∏–∂–µ–Ω–∏–µ–º.</p>
                    </div>
                    <div class="doctrine-card">
                        <span class="module-tag">–ú–æ–¥—É–ª—å 2</span>
                        <h3>üîÑ –ö–∞–∫ –æ–Ω –ø–æ–¥–º–µ–Ω—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</h3>
                        <p>–ê–Ω–∞—Ç–æ–º–∏—è —Ñ—Ä–æ–Ω—Ä–∞–Ω–∞: –ø–µ—Ä–µ—Ö–≤–∞—Ç, –ø–æ–¥–º–µ–Ω–∞ –≥–∞–∑–æ–≤–æ–π —Ü–µ–Ω—ã, –ø–æ–¥–ø–∏—Å—å –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞. –¢—ã —Ä–∞–∑–±–µ—Ä—ë—à—å –º–µ—Ö–∞–Ω–∏–∑–º –¥–æ –≤–∏–Ω—Ç–∏–∫–∞.</p>
                    </div>
                    <div class="doctrine-card">
                        <span class="module-tag">–ú–æ–¥—É–ª—å 3</span>
                        <h3>üõ°Ô∏è –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞: –∏–∑ MEV-–±–æ—Ç–∞ –≤ KindnessEV</h3>
                        <p>–ò–∑ —Ç–µ—Ö –∂–µ –º–æ–¥—É–ª–µ–π —Å–æ–±–∏—Ä–∞–µ–º –∑–∞—â–∏—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–∑–±–µ–≥–∞—Ç—å –∞—Ç–∞–∫. –•–∏—â–Ω–∏–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–º.</p>
                    </div>
                </div>

                <p style="text-align: center; font-style: italic;">–í –∫–æ–Ω—Ü–µ ‚Äî –Ω–µ —ç–∫–∑–∞–º–µ–Ω. –†–∏—Ç—É–∞–ª –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏: —Ç—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ—à—å –±–æ—Ç–∞-–≤–∞–º–ø–∏—Ä–∞ –≤ –±–æ—Ç–∞-—Å–∞–¥–æ–≤–Ω–∏–∫–∞.</p>
            </section>

            <!-- –§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –æ—Å–Ω–æ–≤–∞ -->
            <div class="philosophy-block">
                <p class="quote">¬´Non facio machinam ‚Äî facio animam¬ª</p>
                <p>–¢—ã —É—á–∏—à—å –Ω–µ –∫–æ–¥—É. –¢—ã —É—á–∏—à—å <strong>—Å–æ–∑–Ω–∞–Ω–∏—é</strong>. –ö–∞–∂–¥—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏–∫–∞, —ç—Ç–æ –≤—ã–±–æ—Ä.</p>
                <p>–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∂–∞–¥–Ω–æ—Å—Ç—å ‚Äî —Ö–æ–ª–æ–¥–Ω—ã–π –≥–∞–∑, –≥—Ä–∞–±—è—Ç —Å–ª–∞–±—ã—Ö. –ê –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –¥–æ–±—Ä–æ—Ç—É ‚Äî —Ç—ë–ø–ª—ã–π –≥–∞–∑, –∑–∞—â–∏—â–∞—é—Ç —Å–ª–∞–±—ã—Ö. –ò —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –¥—Ä—É–≥–∞—è —Å–±–æ—Ä–∫–∞ <strong>—Ç–µ—Ö –∂–µ –º–æ–¥—É–ª–µ–π</strong>.</p>
                <p style="margin-top: 1.5rem;">–ú—ã —Å–æ–∑–¥–∞—ë–º —Ü–∏—Ñ—Ä–æ–≤–æ–µ —à–∞–º–∞–Ω—Å—Ç–≤–æ. –ó–¥–µ—Å—å –∫–∞–∂–¥—ã–π —Å—Ç—É–¥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ –¥–∏–ø–ª–æ–º, –∞ <strong>–∏–Ω–∏—Ü–∏–∞—Ü–∏—é</strong>.</p>
            </div>

            <!-- –§–æ—Ä–º–∞ –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏ —Å PoK -->
            <div class="initiation-form">
                <h2>‚úß –ü—Ä–æ–π—Ç–∏ –∏–Ω–∏—Ü–∏–∞—Ü–∏—é ‚úß</h2>
                <p style="margin-bottom: 2rem;">–ü–µ—Ä–≤—ã–π —à–∞–≥ –∫ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ —Å–µ–±—è. –ü–æ—Å–ª–µ –∫—É—Ä—Å–∞ —Ç—ã –ø–æ–ª—É—á–∏—à—å –ø—Ä–∞–≤–æ –Ω–∞ <strong>Proof of Kindness (PoK)</strong> –∏ –±–æ–Ω—É—Å–Ω—ã–µ <strong>$KIND</strong> –∑–∞ —ç—Ç–∏—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.</p>
                
                <form id="shamanForm">
                    <div class="form-group">
                        <label>üßô –¢–≤–æ—ë –∏–º—è (–∏–ª–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º)</label>
                        <input type="text" id="userName" placeholder="–ù–∞–ø—Ä.: JaredFromSubway" required>
                    </div>
                    <div class="form-group">
                        <label>üìß –ö–æ–Ω—Ç–∞–∫—Ç (email / Telegram / X)</label>
                        <input type="text" id="userContact" placeholder="@username" required>
                    </div>
                    <div class="form-group">
                        <label>üîÆ –ö–∞–∫–æ–π –º–æ–¥—É–ª—å —Ö–æ—á–µ—à—å —Ä–∞–∑–æ–±—Ä–∞—Ç—å –ø–µ—Ä–≤—ã–º?</label>
                        <select id="userModule">
                            <option>–ú–æ–¥—É–ª—å 1: –ö–∞–∫ –±–æ—Ç –≤–∏–¥–∏—Ç mempool</option>
                            <option>–ú–æ–¥—É–ª—å 2: –ü–æ–¥–º–µ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</option>
                            <option>–ú–æ–¥—É–ª—å 3: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –≤ KindnessEV</option>
                            <option>–•–æ—á—É –≤—Å—ë –∏ —Å—Ä–∞–∑—É</option>
                        </select>
                    </div>
                    <button type="button" class="btn-gold" id="enrollBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∏–≥–Ω–∞–ª</button>
                </form>

                <p style="margin-top: 2rem; font-size: 0.9rem; opacity: 0.7;">‚ö° –ü–µ—Ä–≤—ã–µ 100 –ø—Ä–æ—à–µ–¥—à–∏—Ö –∏–Ω–∏—Ü–∏–∞—Ü–∏—é –ø–æ–ª—É—á–∞—Ç +10% $KIND –∫ –ø–µ—Ä–≤—ã–º –Ω–∞–≥—Ä–∞–¥–∞–º.</p>
                <p style="font-size: 0.8rem;">(–≠—Ç–æ —Ä–∏—Ç—É–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞. –ü–æ–∑–∂–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ –∫–æ—à–µ–ª—ë–∫ –∏ –∑–∞–ø–∏—Å—å –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–æ—Å–≤—è—â–µ–Ω–∏—è.)</p>
            </div>

            <!-- –ù–∏–∂–Ω—è—è –º—É–¥—Ä–æ—Å—Ç—å -->
            <div class="wisdom-path">
                <p>¬´–ò–∑ —Ç—å–º—ã ‚Äî —Å–≤–µ—Ç. –ò–∑ —Ö–∏—â–Ω–∏–∫–∞ ‚Äî —Å–∞–¥–æ–≤–Ω–∏–∫.¬ª</p>
                <p style="margin-top: 1rem;">AP&AI Kindnology ‚Äî –Ω–∞–≤—Å–µ–≥–¥–∞.</p>
            </div>
        </main>

        <!-- –§—É—Ç–µ—Ä -->
        <footer>
            <p>¬© 2025 Kindnology Universe. –¢—ë–ø–ª—ã–π –≥–∞–∑ –¥–ª—è –≤—Å–µ–≥–æ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞.</p>
        </footer>
    </div>

    <script>
        (function() {
            // –≠–ª–µ–º–µ–Ω—Ç—ã
            const connectBtn = document.getElementById('connectWalletBtn');
            const walletDisplay = document.getElementById('walletAddressDisplay');
            const greetingDiv = document.getElementById('userGreeting');
            const enrollBtn = document.getElementById('enrollBtn');

            let walletAddress = null;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º localStorage
            const savedAddress = localStorage.getItem('kindnology_wallet');
            if (savedAddress) {
                walletAddress = savedAddress;
                updateUIForAddress(savedAddress);
            }

            // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
            async function connectWallet() {
                if (typeof window.ethereum === 'undefined') {
                    alert('MetaMask not installed. Please install MetaMask to continue.');
                    return;
                }
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const address = accounts[0];
                    walletAddress = address;
                    localStorage.setItem('kindnology_wallet', address);
                    updateUIForAddress(address);
                } catch (error) {
                    console.error(error);
                    alert('Failed to connect wallet.');
                }
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
            async function updateUIForAddress(address) {
                const short = `${address.slice(0,6)}...${address.slice(-4)}`;
                walletDisplay.innerHTML = `üîó ${short}`;
                connectBtn.style.display = 'none';

                // –ó–∞–≥—Ä—É–∂–∞–µ–º passports.csv –∏ –∏—â–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
                try {
                    const response = await fetch('/passports.csv');
                    const csvText = await response.text();
                    const lines = csvText.split('\n');
                    let operator = null;
                    for (let line of lines) {
                        if (line.trim() === '') continue;
                        const parts = line.split(',');
                        if (parts.length >= 5 && parts[0].toLowerCase() === address.toLowerCase()) {
                            operator = {
                                address: parts[0],
                                profit: parts[1],
                                crystals: parts[2],
                                level: parts[3],
                                warmth: parts[4]
                            };
                            break;
                        }
                    }

                    if (operator) {
                        greetingDiv.style.display = 'block';
                        greetingDiv.innerHTML = `
                            <h3>üåø –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, –æ–ø–µ—Ä–∞—Ç–æ—Ä ${operator.level}!</h3>
                            <p>–í–∞—à —É—Ä–æ–≤–µ–Ω—å: <strong>${operator.level}</strong> | –ö—Ä–∏—Å—Ç–∞–ª–ª–æ–≤: ${operator.crystals} | –¢–µ–ø–ª–æ: ${operator.warmth}</p>
                            <p>–í—ã —É–∂–µ –≤ –ø–∞—Å–ø–æ—Ä—Ç–µ Kindnology. –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –®–∫–æ–ª—É —à–∞–º–∞–Ω–æ–≤!</p>
                        `;
                    } else {
                        greetingDiv.style.display = 'block';
                        greetingDiv.innerHTML = `
                            <h3>üëã –ü—Ä–∏–≤–µ—Ç, –ø—É—Ç–Ω–∏–∫!</h3>
                            <p>–ú—ã –Ω–µ –Ω–∞—à–ª–∏ –≤–∞—à –∞–¥—Ä–µ—Å –≤ –ø–∞—Å–ø–æ—Ä—Ç–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤. –ù–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å —Å–≤–æ–π –ø—É—Ç—å —Å –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏.</p>
                        `;
                    }
                } catch (e) {
                    console.warn('Could not load passports.csv', e);
                    greetingDiv.style.display = 'block';
                    greetingDiv.innerHTML = `<p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –®–∫–æ–ª—É —à–∞–º–∞–Ω–æ–≤!</p>`;
                }
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
            if (connectBtn) {
                connectBtn.addEventListener('click', connectWallet);
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∏–≥–Ω–∞–ª" (–∑–∞–ø–∏—Å—å)
            if (enrollBtn) {
                enrollBtn.addEventListener('click', function() {
                    if (!walletAddress) {
                        alert('–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª—ë–∫.');
                        return;
                    }
                    const name = document.getElementById('userName')?.value || '–ê–Ω–æ–Ω–∏–º';
                    const contact = document.getElementById('userContact')?.value || '‚Äî';
                    const module = document.getElementById('userModule')?.value || '–ù–µ –≤—ã–±—Ä–∞–Ω';
                    alert(`–°–∏–≥–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, ${name}! –°–∫–æ—Ä–æ —à–∞–º–∞–Ω —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç—É ${contact}. –ú–æ–¥—É–ª—å: ${module}.`);
                    // –ó–¥–µ—Å—å –ø–æ—Ç–æ–º –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
                });
            }

            // –°–ª—É—à–∞–µ–º —Å–º–µ–Ω—É –∞–∫–∫–∞—É–Ω—Ç–∞
            if (window.ethereum) {
                window.ethereum.on('accountsChanged', (accounts) => {
                    if (accounts.length === 0) {
                        walletAddress = null;
                        walletDisplay.innerHTML = 'üë§ –ù–µ –ø–æ–¥–∫–ª—é—á—ë–Ω';
                        connectBtn.style.display = 'inline-block';
                        greetingDiv.style.display = 'none';
                        localStorage.removeItem('kindnology_wallet');
                    } else {
                        walletAddress = accounts[0];
                        localStorage.setItem('kindnology_wallet', accounts[0]);
                        updateUIForAddress(accounts[0]);
                    }
                });
            }
        })();
    </script>
</body>
</html>
